#!/usr/bin/env node
!function(e){var t={};function i(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(o,s,function(t){return e[t]}.bind(null,s));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=6)}([function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("@sweetcom/colors")},function(e,t,i){const o=i(0),s=i(16),n=i(17);e.exports=class{constructor(){this.entry=[],this.plugins=[],this.module={rules:[]},this.output={path:"",publicPath:"",filename:"[hash].sweet.js"},this.setDevelopmentMode()}setDevelopmentMode(){this.mode="development"}setProductionMode(){this.mode="production"}addPlugins(e){this.plugins.push(e)}addLoaderRule(e){this.module.rules.push(e)}addEntry(e){this.entry.push(e)}setOutputPath(e){this.output.path=e}setTarget(e){this.target=e}setOutputPublicPath(e){this.output.publicPath=e}setOutputfilename(e){this.output.filename=e}getJsxLoaderRule(e){return{test:/\.(js|jsx)$/,exclude:/node_modules/,loader:o.join(e,"babel-loader"),options:{cacheDirectory:!1,presets:[o.join(e,"@babel/preset-env"),o.join(e,"@babel/preset-react")],plugins:[o.join(e,"@babel/plugin-proposal-class-properties")]}}}getEslintLoaderRule(){return{test:/\.(js|jsx)$/,exclude:/node_modules/,loader:"eslint-loader",options:i(18)}}getStaticFilesLoader(e){return{test:[/\.bmp$/,/\.gif$/,/\.jpe?g$/,/\.png$/,/\.svg$/,/\.json$/,/\.ico$/],loader:o.join(e,"file-loader")}}getFontsLoaderRule(e){return{test:/\.(woff|woff2|eot|ttf|otf)$/,use:[o.join(e,"file-loader")]}}getcssLoaderRule(e){return{test:/\.(sa|sc|c)ss$/,use:[o.join(e,"style-loader"),o.join(e,"css-loader"),o.join(e,"sass-loader")]}}getProdcssLoaderRule(e){return{test:/\.(sa|sc|c)ss$/,use:[n.loader,o.join(e,"css-loader"),o.join(e,"sass-loader")]}}getCssExtractionPlugin(){return new n({filename:"[hash].sweet.css"})}getProdCssExtractionPlugin(){return new n({filename:"sweet.css"})}getHtmlWebpackPlugin(e){return new s({inject:!0,templateParameters:{PUBLIC_URL:""},title:"Sweet App",template:e||"./public/index.html"})}}},function(e,t){e.exports=require("webpack")},function(e,t){e.exports=require("child_process")},function(e,t,i){"use strict";new(i(7))},function(e,t,i){const o=i(1),s=i(0);i(2);const n=i(8);e.exports=class{constructor(){this.rootCliDir=s.dirname(process.mainModule.filename),this.params=new n(process.cwd(),this.rootCliDir),this.instruction=this.params.getInstruction(),this.package=JSON.parse(o.readFileSync(s.join(this.rootCliDir,"package.json"),"utf8")),this.params.package=this.package,this.run()}run(){switch(this.instruction){case"init":this.init();break;case"start":this.start();break;case"build":this.build();break;case"buildNpm":case"buildCSS":this.buildNpm();break;case"test":console.log("[@Sweetcom/cli]".green+" We are sorry ! Tests are not implemented yet".brightRed);break;case"doc":this.doc();break;case"v":case"-v":case"--v":case"V":case"-V":case"version":case"-version":case"--version":console.log("[@Sweetcom/cli]".green+" version : ".cyan+this.package.version.brightCyan),console.log("[@Sweetcom/cli]".green+" author : ".cyan+this.package.author.cyan),console.log("[@Sweetcom/cli]".green+" Please visit ".cyan+"[http://cli.sweetcom75.fr]".blue+" if you feel the need to know more about sweetcom/cli".cyan);break;default:console.log("[@Sweetcom/cli]".green+" HELP ..."),console.log("[@Sweetcom/cli]".green+" Please visit "+"[http://cli.sweetcom75.fr]".blue+" To get all the help you need")}}init(){console.log("[@Sweetcom/cli] Initializing ...".green),new(i(9))(this.params).run()}start(){console.log("[@Sweetcom/cli] Starting ...".green),new(i(15))(this.params).run()}build(){console.log("[@Sweetcom/cli] Building ...".green),new(i(20))(this.params).run()}buildNpm(){console.log("[@Sweetcom/cli] Building For NPM...".green),new(i(22))(this.params).run()}doc(){console.log("[@Sweetcom/cli] Generating documentation ...".green),new(i(24))(this.params).run()}}},function(e,t){e.exports=class{constructor(e,t){this.workingDir=e,this.CliDir=t,this._args=process.argv.slice(2)}getWorkingDir(){return this.workingDir}getCliDir(){return this.CliDir}getInstruction(){return this._args[0]}getArgsPosition(e){for(let t=0;t<=e.length;t++){let i=this._args.findIndex(i=>i===e[t]);if(i>-1)return i}return-1}getParamAsString(e,t){let i=this.getArgsPosition(e);return-1==i?t:this._args[i+1]}getParamAsNumber(e,t){let i=this.getArgsPosition(e);return-1==i?t:parseInt(this._args[i+1])}getParamAsBoolean(e){return this.getArgsPosition(e)>-1}}},function(e,t,i){const o=i(0),s=i(1),n=i(10),r=i(11),a=i(12),c=(i(2),i(14));e.exports=class extends a{constructor(e){super(),this.params=e,this.appname=this.params.getParamAsString(["init"]),this.workDir=this.params.getWorkingDir(),this.cliDir=this.params.getCliDir(),this.verbose=this.params.getParamAsBoolean(["-v","--v","-verbose","--verbose"],!0),this.tplDir=this.getTemplateDir(),this.appDir=o.join(this.workDir,this.appname)}getTemplateDir(){let e=["base","sweet"];if(this.template=this.params.getParamAsString(["-t","--t","-template","--template"],"base"),-1!=e.indexOf(this.template))return o.join(this.cliDir,"template",this.template);throw new Error("Template name error posibilities : ["+e.join(" - ")+"]")}projectDirectoryExistsWarning(){console.log("[@Sweetcom/cli]".green+' Warning : The Directory "'.yellow+this.appname.yellow+'" allready exists !'.yellow),console.log("[@Sweetcom/cli]".green+" Please chose from below : ".yellow),console.log("[@Sweetcom/cli]   1 : Do nothing and exit.".green),console.log("[@Sweetcom/cli]".green+'   2 : Delete existing folder and initialize app in "'.yellow+this.appname.yellow+'" anyway !!!!'.yellow),console.log("[@Sweetcom/cli]   3 : Chose an other name for your app.".green)}checkifProjectExists(){return new Promise((e,t)=>{s.exists(this.appDir,i=>{i?(this.projectDirectoryExistsWarning(),this.question("1, ".green+"2".yellow+" or 3 to chose a new name ? ".green).then(i=>{"1"==i?(console.log("[@Sweetcom/cli] You chose to do nothing ".green),console.log("[@Sweetcom/cli] Doing nothing  .... \r\n[@Sweetcom/cli] Good Day to you ;) ".green),process.exit(0)):"3"==i?(console.log("[@Sweetcom/cli] You chose to rename your application ".green),this.question("Please enter the new name for your application ".green).then(t=>{this.appname=t,this.appDir=o.join(this.workDir,this.appname),e(t)})):"2"==i?(console.log("[@Sweetcom/cli] You chose to delete the old existing folder ".green),r(this.appDir).then(()=>{console.log("[@Sweetcom/cli] Folder deleted correctly ".green),e(i)}).catch(e=>{t(e)})):(console.log("[@Sweetcom/cli]".green+" The only available choices are 1, 2 or 3 ".yellow),console.log("[@Sweetcom/cli] Savest choice is doing nothing ".green),console.log("[@Sweetcom/cli] Doing nothing  .... \r\n[@Sweetcom/cli] Good Day to you ;) ".green),process.exit(0))})):e()})})}run(){this.checkifProjectExists().then(e=>{n(this.tplDir,this.appDir,e=>{if(e)return console.error(e),process.exit(0);let t=new c(o.join(this.appDir,"package.json"));t.package.name=this.appname,t.writeFile();let i=new c(o.join(this.appDir,"public/manifest.json"));i.package.short_name=this.appname,i.package.name=this.appname,i.writeFile(),console.log("[@Sweetcom/cli] Running npm install ...".green),this.exec("npm",["install"],this.appDir).then(()=>{this.question("Would you like to start your application ( yes if empty answer )?".brightGreen).then(e=>{"YES"!=e.toUpperCase()&&"Y"!=e.toUpperCase()&&""!==e||this.exec("sweet",["start"],this.appDir).then(()=>{}).catch(e=>(console.error(e),process.exit(0)))})}).catch(e=>(console.error(e),process.exit(0)))})}).catch(e=>{throw e})}}},function(e,t,i){const o=i(1),s=i(0);e.exports=function(e,t,i,n){var r=n;n||(r=i,i={});var a=process.cwd(),c=s.resolve(a,e),l=s.resolve(a,t),u=i.filter,g=i.rename,p=i.transform,h=!1!==i.clobber,d=i.modified,m=i.dereference,f=null,w=0,b=0,j=0,y=i.limit||16;function x(e){if(w++,u)if(u instanceof RegExp){if(!u.test(e))return R(!0)}else if("function"==typeof u&&!u(e))return R(!0);return function e(t){var i=m?o.stat:o.lstat;if(j>=y)return setImmediate((function(){e(t)}));j++,i(t,(function(e,i){var n,r,u={};return e?C(e):(u.name=t,u.mode=i.mode,u.mtime=i.mtime,u.atime=i.atime,i.isDirectory()?void v(r=(n=u).name.replace(c,l),(function(e){if(e)return function(e,t){o.mkdir(t,e.mode,(function(t){if(t)return C(t);P(e.name)}))}(n,r);P(n.name)})):i.isFile()?function(e){var t=e.name.replace(c,l);g&&(t=g(t));v(t,(function(i){return i?k(e,t):(h&&D(t,(function(){k(e,t)})),d?void(m?o.stat:o.lstat)(t,(function(i,o){if(!(e.mtime.getTime()>o.mtime.getTime()))return R();k(e,t)})):R())}))}(u):i.isSymbolicLink()?function(e){var t=e.replace(c,l);o.readlink(e,(function(e,i){if(e)return C(e);!function(e,t){m&&(e=s.resolve(a,e));v(t,(function(i){if(i)return S(e,t);o.readlink(t,(function(i,o){return i?C(i):(m&&(o=s.resolve(a,o)),o===e?R():D(t,(function(){S(e,t)})))}))}))}(i,t)}))}(t):void 0)}))}(e)}function k(e,t){var i=o.createReadStream(e.name),s=o.createWriteStream(t,{mode:e.mode});i.on("error",C),s.on("error",C),p?p(i,s,e):s.on("open",(function(){i.pipe(s)})),s.once("finish",(function(){d?(o.utimesSync(t,e.atime,e.mtime),R()):R()}))}function D(e,t){o.unlink(e,(function(e){return e?C(e):t()}))}function P(e){o.readdir(e,(function(t,i){return t?C(t):(i.forEach((function(t){x(s.join(e,t))})),R())}))}function S(e,t){o.symlink(e,t,(function(e){return e?C(e):R()}))}function v(e,t){o.lstat(e,(function(e){return e&&"ENOENT"===e.code?t(!0):t(!1)}))}function C(e){return i.stopOnError?r(e):(!f&&i.errs?f=o.createWriteStream(i.errs):f||(f=[]),void 0===f.write?f.push(e):f.write(e.stack+"\n\n"),R())}function R(e){if(e||j--,b++,w===b&&0===j&&void 0!==r)return r(f||null)}y=y<1?1:y>512?512:y,x(c)}},function(e,t,i){const o=i(1),s=i(0);function n(e){return new Promise((function(t,i){o.access(e,(function(r){r&&i(r),o.readdir(e,{withFileTypes:!0},(function(r,a){if(r&&i(r),0==a.length)return t((c=e,new Promise((e,t)=>{o.rmdir(c,(function(i){i&&t(i),e(c)}))})));var c;a.map((function(i){return i.isDirectory()?t(n(s.join(e,i.name))):t((r=s.join(e,i.name),new Promise((e,t)=>{o.unlink(r,(function(i){i&&t(i),e()}))})));var r}))}))}))}))}e.exports=n},function(e,t,i){i(2);e.exports=class{constructor(){this.cp=i(5),this.readLine=i(13)}question(e){return new Promise((t,i)=>{const o=this.readLine.createInterface({input:process.stdin,output:process.stderr});o.question("[@Sweetcom/cli] Question : ".green+e+"\n\r[@Sweetcom/cli]".green+" Answer  : ".brightGreen,e=>{o.close(),t(e)})})}exec(e,t,i){return new Promise((o,s)=>{const n=this.cp.spawn(e,t,{stdio:"inherit",shell:!0,cwd:i||process.cwd()});n.on("error",e=>{s(e)}),n.on("exit",e=>{0===e?o():s()})})}}},function(e,t){e.exports=require("readline")},function(e,t,i){const o=i(1);e.exports=class{constructor(e,t){let i=t||!0;this.fileName=e,i&&this.load()}load(){this.package=JSON.parse(o.readFileSync(this.fileName,"utf8"))}updateVersion(){}writeFile(){o.writeFileSync(this.fileName,JSON.stringify(this.package,void 0,4))}}},function(e,t,i){const o=i(0),s=i(1),n=i(3),r=i(4),a=i(19);e.exports=class{constructor(e){this.params=e,this.open=this.params.getParamAsBoolean(["-o","--open"]),this.port=this.params.getParamAsNumber(["-p","--port"],8080),this.host="127.0.0.1",this.config=new n,this.package=JSON.parse(s.readFileSync(o.join(this.params.getWorkingDir(),"package.json"),"utf8")),this.configureBaseApp(),this.addReactConfig()}addReactConfig(){this.config.addLoaderRule(this.config.getJsxLoaderRule(o.join(this.params.getCliDir(),"node_modules")))}configureBaseApp(){this.watch=!0,this.devtool="inline-source-map",this.config.resolve={modules:[o.join(this.params.getCliDir(),"node_modules"),o.join(this.params.getWorkingDir(),"node_modules")]},this.config.addEntry(o.join(this.params.getCliDir(),"node_modules","webpack-dev-server/client")),this.config.addEntry(o.join(this.params.getWorkingDir(),"src","index.js")),this.config.setOutputPath(o.join(this.params.getWorkingDir(),"public")),this.config.setOutputPublicPath("/"),this.config.addLoaderRule(this.config.getcssLoaderRule(o.join(this.params.getCliDir(),"node_modules"))),this.config.addLoaderRule(this.config.getStaticFilesLoader(o.join(this.params.getCliDir(),"node_modules"))),this.config.addLoaderRule(this.config.getFontsLoaderRule(o.join(this.params.getCliDir(),"node_modules"))),this.config.output.path=o.join(this.params.getWorkingDir(),"build"),this.config.addPlugins(this.config.getCssExtractionPlugin()),this.config.addPlugins(this.config.getHtmlWebpackPlugin(o.join(this.params.getWorkingDir(),"public","index.html"))),this.config.addPlugins(new r.HotModuleReplacementPlugin)}run(){let e=r(this.config),t={stats:{hash:!1,builtAt:!1,entrypoints:!1,performance:!1,assetsSort:"!size",modules:!1,modulesSort:"size",chunks:!1,colors:!0},compress:!0,contentBase:o.join(this.params.getWorkingDir(),"public"),inline:!0,watchContentBase:!0,open:!0,hot:!0,https:!1,public:"http://"+this.host+":"+this.port,publicPath:"",overlay:{warnings:!0,errors:!0},host:this.host,port:this.port,historyApiFallback:!0};a.addDevServerEntrypoints(this.config,t,void 0),new a(e,t).listen(this.port,this.host,()=>{})}}},function(e,t){e.exports=require("html-webpack-plugin")},function(e,t){e.exports=require("mini-css-extract-plugin")},function(e,t){e.exports={parser:"babel-eslint",rules:{"react/jsx-uses-react":1,"react/jsx-uses-vars":1,"react/react-in-jsx-scope":1,"react/jsx-tag-spacing":[0,{beforeSelfClosing:"always"}],curly:[1],"linebreak-style":[1,"unix"],semi:[1,"always"],"comma-dangle":[0],"no-unused-vars":[1,{vars:"all",args:"none",ignoreRestSiblings:!0}],"no-console":[0],"object-curly-spacing":[1,"always"],"keyword-spacing":["error"]},env:{es6:!0,browser:!0,node:!0},extends:"eslint:recommended",ecmaFeatures:{modules:!0,jsx:!0,experimentalObjectRestSpread:!0},plugins:["jsx-a11y","react"]}},function(e,t){e.exports=require("webpack-dev-server")},function(e,t,i){const o=i(0),s=i(1),n=i(3),r=i(4),a=i(21);e.exports=class{constructor(e){this.params=e,this.config=new n,this.package=JSON.parse(s.readFileSync(o.join(this.params.getWorkingDir(),"package.json"),"utf8")),this.configureBaseApp(),this.addReactConfig()}addReactConfig(){this.config.addLoaderRule(this.config.getJsxLoaderRule(o.join(this.params.getCliDir(),"node_modules")))}compilerCallback(e,t){if(e)throw e;const i=t.toJson();if(t.hasErrors())throw new Error(i.errors);t.hasWarnings()&&console.warn(i.warnings),console.log(t.toString({hash:!1,builtAt:!1,entrypoints:!1,performance:!1,assetsSort:"!size",modules:!1,modulesSort:"size",chunks:!1,colors:!0}))}configureBaseApp(){this.watch=!0,this.devtool="inline-source-map",this.config.resolve={modules:[o.join(this.params.getCliDir(),"node_modules"),o.join(this.params.getWorkingDir(),"node_modules")]},this.config.setProductionMode(),this.config.addEntry(o.join(this.params.getWorkingDir(),"src","index.js")),this.config.setOutputPath(o.join(this.params.getWorkingDir(),"build")),this.config.setOutputPublicPath("/"),this.config.addLoaderRule(this.config.getProdcssLoaderRule(o.join(this.params.getCliDir(),"node_modules"))),this.config.addLoaderRule(this.config.getStaticFilesLoader(o.join(this.params.getCliDir(),"node_modules"))),this.config.addLoaderRule(this.config.getFontsLoaderRule(o.join(this.params.getCliDir(),"node_modules"))),this.config.addPlugins(new a([{from:"**/*",to:"assets",force:!0,context:o.join(this.params.getWorkingDir(),"public/assets")},{from:"favicon.ico",to:"favicon.ico",force:!0,context:o.join(this.params.getWorkingDir(),"public")},{from:"manifest.json",to:"manifest.json",force:!0,context:o.join(this.params.getWorkingDir(),"public")}],{})),this.config.addPlugins(this.config.getCssExtractionPlugin()),this.config.addPlugins(this.config.getHtmlWebpackPlugin(o.join(this.params.getWorkingDir(),"public","index.html")))}run(){r(this.config,this.compilerCallback.bind(this))}}},function(e,t){e.exports=require("copy-webpack-plugin")},function(e,t,i){const o=i(3),s=(i(23),i(4)),n=i(0);e.exports=class{constructor(e){this.params=e,this.config=new o,this.webpackConfig()}webpackConfig(){this.config.resolve={modules:[n.join(this.params.getCliDir(),"node_modules"),n.join(this.params.getWorkingDir(),"node_modules")]},this.config.setProductionMode(),this.config.addEntry(this.params._args[1]),this.config.target="web",this.config.setOutputPath(n.join(this.params.getWorkingDir(),"npm")),this.config.setOutputPublicPath("./"),this.config.output.filename="index.js",this.config.output.libraryExport="default",this.config.output.libraryTarget="commonjs",this.config.addLoaderRule(this.config.getJsxLoaderRule(n.join(this.params.getCliDir(),"node_modules"))),this.config.addLoaderRule(this.config.getProdcssLoaderRule(n.join(this.params.getCliDir(),"node_modules"))),this.config.addLoaderRule(this.config.getStaticFilesLoader(n.join(this.params.getCliDir(),"node_modules"))),this.config.addLoaderRule(this.config.getFontsLoaderRule(n.join(this.params.getCliDir(),"node_modules"))),this.config.addPlugins(this.config.getProdCssExtractionPlugin())}compilerCallback(e,t){if(e)throw e;console.log(t.toString({chunks:!1,colors:!0}))}run(){s(this.config,this.compilerCallback.bind(this))}}},function(e,t){e.exports=require("webpack-node-externals")},function(e,t,i){const{exec:o}=i(5);e.exports=class{constructor(e){this.params=e}run(){o("node "+this.params.CliDir+"\\node_modules\\jsdoc\\jsdoc.js src/ -d doc",(e,t,i)=>{e?console.error(`exec error: ${e}`):(console.log(`stdout: ${t}`),console.error(`stderr: ${i}`))})}}}]);